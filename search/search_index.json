{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"SIO Docs Documents utiles pour les activit\u00e9s de BTS SIO au Lyc\u00e9e Gabriel Faur\u00e9 (Annecy) Vous trouverez ici, quelques ressources \u00e0 utiliser dans les diff\u00e9rentes activit\u00e9s men\u00e9es pendant l'ann\u00e9e.","title":"SIO Docs"},{"location":"#sio-docs","text":"","title":"SIO Docs"},{"location":"#documents-utiles-pour-les-activites-de-bts-sio-au-lycee-gabriel-faure-annecy","text":"Vous trouverez ici, quelques ressources \u00e0 utiliser dans les diff\u00e9rentes activit\u00e9s men\u00e9es pendant l'ann\u00e9e.","title":"Documents utiles pour les activit\u00e9s de BTS SIO au Lyc\u00e9e Gabriel Faur\u00e9 (Annecy)"},{"location":"1A/AP/AP-1A-Bases-Linux/","text":"\ud83d\udc27 Bases Linux sous Debian (SISR 1\u00e8re Ann\u00e9e) 1. Navigation et Manipulation de Fichiers (Les Fondamentaux) Ces commandes sont la base de l'interaction avec le syst\u00e8me de fichiers. Commande R\u00f4le Exemple Explication pwd P rint W orking D irectory. Affiche le chemin absolu du r\u00e9pertoire courant. pwd Savoir o\u00f9 l'on est dans l'arborescence. ls L i s t. Affiche le contenu d'un r\u00e9pertoire. ls -lha -l (format long), -h (taille lisible), -a (tous les fichiers, y compris les cach\u00e9s). cd C hange D irectory. Permet de changer de r\u00e9pertoire. cd /etc/apache2/ Aller au r\u00e9pertoire de configuration d'Apache. mkdir M a k e Dir ectory. Cr\u00e9er un nouveau r\u00e9pertoire. mkdir -p /var/www/test -p permet de cr\u00e9er les r\u00e9pertoires parents s'ils n'existent pas. touch Cr\u00e9e un fichier vide ou met \u00e0 jour la date d'acc\u00e8s/modification d'un fichier existant. touch mon_script.sh Cr\u00e9er un nouveau script. cp C o p y. Copier des fichiers ou des r\u00e9pertoires. cp fichier.txt /tmp/ Copier fichier.txt dans le r\u00e9pertoire /tmp . mv M o v e. D\u00e9placer ou renommer des fichiers/r\u00e9pertoires. mv old_name.txt new_name.txt Renommer le fichier. rm R e m ove. Supprimer des fichiers. rm -rf dossier -r (r\u00e9cursif, pour les dossiers), -f (force la suppression). ATTENTION DANGER ! 2. Gestion des Droits d'Acc\u00e8s (Chmod & Chown) La s\u00e9curit\u00e9 Linux repose fondamentalement sur la gestion des droits d'acc\u00e8s. Chaque fichier et r\u00e9pertoire est associ\u00e9 \u00e0 un propri\u00e9taire et \u00e0 un groupe , et des permissions sont d\u00e9finies pour trois types d'utilisateurs : u ser (Propri\u00e9taire du fichier) g roup (Groupe du fichier) o thers (Tous les autres utilisateurs) 2.1. Les Permissions Il existe trois types de permissions, visualis\u00e9es dans le format long de ls -l (ex: -rwxr-xr-- ): Lettre Num\u00e9rique (Octal) R\u00f4le (Fichier) R\u00f4le (R\u00e9pertoire) r 4 Read : Lire le contenu du fichier. Lister le contenu du r\u00e9pertoire. w 2 Write : Modifier ou supprimer le fichier. Cr\u00e9er, renommer ou supprimer des fichiers/r\u00e9pertoires dans ce r\u00e9pertoire. x 1 Execute : Ex\u00e9cuter le fichier (si c'est un programme ou un script). Y acc\u00e9der (s'y d\u00e9placer avec cd ). 2.2. Commande chmod (CHange MODe) Elle modifie les permissions d'un fichier ou d'un r\u00e9pertoire. Mode symbolique (Utilisation de u , g , o , a pour a ll) : chmod u+x mon_script.sh : Ajoute le droit d'ex\u00e9cution au propri\u00e9taire . chmod go-w fichier.txt : Retire le droit d'\u00e9criture au groupe et aux autres . Mode octal (Le plus pr\u00e9cis pour le SISR) : On additionne les valeurs num\u00e9riques ($4+2+1=7$) pour chaque cat\u00e9gorie. $750$ signifie : Propri\u00e9taire : $7$ (rwx) Groupe : $5$ (r-x : lecture et ex\u00e9cution) Autres : $0$ (--- : aucun droit) Exemple : chmod 750 mon_dossier 2.3. Commande chown (CHange OWNer) Elle modifie le propri\u00e9taire et/ou le groupe d'un fichier/r\u00e9pertoire. sudo chown user:group fichier sudo chown prof_sio:adm_web /var/www/site : D\u00e9finit prof_sio comme propri\u00e9taire et adm_web comme groupe du r\u00e9pertoire. sudo chown -R www-data:www-data /var/www/html : Change r\u00e9cursivement ( -R ) le propri\u00e9taire et le groupe de tous les fichiers d'un site \u00e0 l'utilisateur et groupe d'Apache. 3. Gestion des Privil\u00e8ges et des Services 3.1. Commande sudo (SuperUser DO) sudo permet \u00e0 un utilisateur autoris\u00e9 d'ex\u00e9cuter une commande avec les privil\u00e8ges d'un autre utilisateur, g\u00e9n\u00e9ralement l'utilisateur root (administrateur). R\u00f4le : Ex\u00e9cuter une commande critique (installation, red\u00e9marrage de service, modification de fichiers syst\u00e8me) sans se connecter directement en root . Exemple : sudo systemctl restart apache2 3.2. Gestion des Services avec systemctl systemctl est l'outil standard (Systemd) pour g\u00e9rer les services (ou d\u00e9mons) sur Debian 13 (Apache, SSH, MariaDB, etc.). Commande R\u00f4le Exemple start D\u00e9marre un service. sudo systemctl start apache2 stop Arr\u00eate un service. sudo systemctl stop apache2 restart Arr\u00eate puis red\u00e9marre un service (n\u00e9cessaire apr\u00e8s modification d'une configuration majeure). sudo systemctl restart apache2 reload Recharge la configuration sans interrompre les connexions existantes (si le service le supporte). sudo systemctl reload apache2 status Affiche l'\u00e9tat du service (actif, inactif, en \u00e9chec) et les derni\u00e8res lignes de log. Indispensable pour le diagnostic ! systemctl status apache2 enable Active le d\u00e9marrage automatique du service au boot du syst\u00e8me. sudo systemctl enable apache2 disable D\u00e9sactive le d\u00e9marrage automatique du service au boot. sudo systemctl disable apache2 4. Gestion des Paquets avec apt Le syst\u00e8me de gestion de paquets APT (Advanced Package Tool) est la m\u00e9thode standard pour installer, mettre \u00e0 jour et supprimer des logiciels sur Debian. Commande R\u00f4le Exemple update Met \u00e0 jour la liste des paquets disponibles (l'index des d\u00e9p\u00f4ts). Toujours faire ceci en premier ! sudo apt update upgrade Installe les versions plus r\u00e9centes des paquets d\u00e9j\u00e0 install\u00e9s. sudo apt upgrade install Installe de nouveaux paquets. sudo apt install mariadb-server remove Supprime un paquet (laisse les fichiers de configuration). sudo apt remove apache2 purge Supprime un paquet et ses fichiers de configuration. (Plus propre !) sudo apt purge apache2 5. Automatisation : Scripts Shell et Planification (Cron) L'administrateur SISR doit automatiser les t\u00e2ches r\u00e9p\u00e9titives (sauvegardes, mises \u00e0 jour, nettoyage). 5.1. \u00c9crire un Script Shell Un script shell est un fichier texte contenant une suite de commandes Linux qui seront ex\u00e9cut\u00e9es s\u00e9quentiellement. L'ent\u00eate (Shebang) : La premi\u00e8re ligne doit indiquer au syst\u00e8me quel interpr\u00e9teur utiliser. Pour Bash (le shell par d\u00e9faut) : #!/bin/bash Exemple de script simple (sauvegarde.sh) : ```bash !/bin/bash D\u00e9finition des variables JOUR=$(date +%Y-%m-%d) SOURCE_DIR=\"/var/www/site\" DEST_DIR=\"/home/backup/web\" Affichage d'un message echo \"--- D\u00e9but de la sauvegarde du $JOUR ---\" Commande de compression des donn\u00e9es tar -czf \"$DEST_DIR/web_backup_$JOUR.tar.gz\" \"$SOURCE_DIR\" echo \"Sauvegarde termin\u00e9e et stock\u00e9e dans $DEST_DIR\" ``` Rendre le script ex\u00e9cutable : chmod u+x sauvegarde.sh 5.2. Planification avec cron cron est le service d'ordonnancement de t\u00e2ches (scheduler) qui permet d'ex\u00e9cuter des commandes ou des scripts \u00e0 intervalles r\u00e9guliers (minute, heure, jour, mois...). Les t\u00e2ches sont d\u00e9finies dans la crontab (cron table). \u00c9diter votre crontab : crontab -e Format d'une ligne crontab : m h dom mon dow commande Champ Valeurs Possibles Description m $0-59$ Minute h $0-23$ Heure dom $1-31$ Jour du Mois mon $1-12$ Mois dow $0-7$ Jour de la Semaine ($0$ ou $7$ = dimanche) Exemple Crontab : Ex\u00e9cuter le script de sauvegarde tous les jours \u00e0 2h30 du matin. bash 30 2 * * * /chemin/absolu/vers/sauvegarde.sh ( * signifie \"toutes les valeurs possibles\").","title":"AP 1A Bases Linux"},{"location":"1A/AP/AP-1A-Bases-Linux/#bases-linux-sous-debian-sisr-1ere-annee","text":"","title":"\ud83d\udc27 Bases Linux sous Debian (SISR 1\u00e8re Ann\u00e9e)"},{"location":"1A/AP/AP-1A-Bases-Linux/#1-navigation-et-manipulation-de-fichiers-les-fondamentaux","text":"Ces commandes sont la base de l'interaction avec le syst\u00e8me de fichiers. Commande R\u00f4le Exemple Explication pwd P rint W orking D irectory. Affiche le chemin absolu du r\u00e9pertoire courant. pwd Savoir o\u00f9 l'on est dans l'arborescence. ls L i s t. Affiche le contenu d'un r\u00e9pertoire. ls -lha -l (format long), -h (taille lisible), -a (tous les fichiers, y compris les cach\u00e9s). cd C hange D irectory. Permet de changer de r\u00e9pertoire. cd /etc/apache2/ Aller au r\u00e9pertoire de configuration d'Apache. mkdir M a k e Dir ectory. Cr\u00e9er un nouveau r\u00e9pertoire. mkdir -p /var/www/test -p permet de cr\u00e9er les r\u00e9pertoires parents s'ils n'existent pas. touch Cr\u00e9e un fichier vide ou met \u00e0 jour la date d'acc\u00e8s/modification d'un fichier existant. touch mon_script.sh Cr\u00e9er un nouveau script. cp C o p y. Copier des fichiers ou des r\u00e9pertoires. cp fichier.txt /tmp/ Copier fichier.txt dans le r\u00e9pertoire /tmp . mv M o v e. D\u00e9placer ou renommer des fichiers/r\u00e9pertoires. mv old_name.txt new_name.txt Renommer le fichier. rm R e m ove. Supprimer des fichiers. rm -rf dossier -r (r\u00e9cursif, pour les dossiers), -f (force la suppression). ATTENTION DANGER !","title":"1. Navigation et Manipulation de Fichiers (Les Fondamentaux)"},{"location":"1A/AP/AP-1A-Bases-Linux/#2-gestion-des-droits-dacces-chmod-chown","text":"La s\u00e9curit\u00e9 Linux repose fondamentalement sur la gestion des droits d'acc\u00e8s. Chaque fichier et r\u00e9pertoire est associ\u00e9 \u00e0 un propri\u00e9taire et \u00e0 un groupe , et des permissions sont d\u00e9finies pour trois types d'utilisateurs : u ser (Propri\u00e9taire du fichier) g roup (Groupe du fichier) o thers (Tous les autres utilisateurs)","title":"2. Gestion des Droits d'Acc\u00e8s (Chmod &amp; Chown)"},{"location":"1A/AP/AP-1A-Bases-Linux/#21-les-permissions","text":"Il existe trois types de permissions, visualis\u00e9es dans le format long de ls -l (ex: -rwxr-xr-- ): Lettre Num\u00e9rique (Octal) R\u00f4le (Fichier) R\u00f4le (R\u00e9pertoire) r 4 Read : Lire le contenu du fichier. Lister le contenu du r\u00e9pertoire. w 2 Write : Modifier ou supprimer le fichier. Cr\u00e9er, renommer ou supprimer des fichiers/r\u00e9pertoires dans ce r\u00e9pertoire. x 1 Execute : Ex\u00e9cuter le fichier (si c'est un programme ou un script). Y acc\u00e9der (s'y d\u00e9placer avec cd ).","title":"2.1. Les Permissions"},{"location":"1A/AP/AP-1A-Bases-Linux/#22-commande-chmod-change-mode","text":"Elle modifie les permissions d'un fichier ou d'un r\u00e9pertoire. Mode symbolique (Utilisation de u , g , o , a pour a ll) : chmod u+x mon_script.sh : Ajoute le droit d'ex\u00e9cution au propri\u00e9taire . chmod go-w fichier.txt : Retire le droit d'\u00e9criture au groupe et aux autres . Mode octal (Le plus pr\u00e9cis pour le SISR) : On additionne les valeurs num\u00e9riques ($4+2+1=7$) pour chaque cat\u00e9gorie. $750$ signifie : Propri\u00e9taire : $7$ (rwx) Groupe : $5$ (r-x : lecture et ex\u00e9cution) Autres : $0$ (--- : aucun droit) Exemple : chmod 750 mon_dossier","title":"2.2. Commande chmod (CHange MODe)"},{"location":"1A/AP/AP-1A-Bases-Linux/#23-commande-chown-change-owner","text":"Elle modifie le propri\u00e9taire et/ou le groupe d'un fichier/r\u00e9pertoire. sudo chown user:group fichier sudo chown prof_sio:adm_web /var/www/site : D\u00e9finit prof_sio comme propri\u00e9taire et adm_web comme groupe du r\u00e9pertoire. sudo chown -R www-data:www-data /var/www/html : Change r\u00e9cursivement ( -R ) le propri\u00e9taire et le groupe de tous les fichiers d'un site \u00e0 l'utilisateur et groupe d'Apache.","title":"2.3. Commande chown (CHange OWNer)"},{"location":"1A/AP/AP-1A-Bases-Linux/#3-gestion-des-privileges-et-des-services","text":"","title":"3. Gestion des Privil\u00e8ges et des Services"},{"location":"1A/AP/AP-1A-Bases-Linux/#31-commande-sudo-superuser-do","text":"sudo permet \u00e0 un utilisateur autoris\u00e9 d'ex\u00e9cuter une commande avec les privil\u00e8ges d'un autre utilisateur, g\u00e9n\u00e9ralement l'utilisateur root (administrateur). R\u00f4le : Ex\u00e9cuter une commande critique (installation, red\u00e9marrage de service, modification de fichiers syst\u00e8me) sans se connecter directement en root . Exemple : sudo systemctl restart apache2","title":"3.1. Commande sudo (SuperUser DO)"},{"location":"1A/AP/AP-1A-Bases-Linux/#32-gestion-des-services-avec-systemctl","text":"systemctl est l'outil standard (Systemd) pour g\u00e9rer les services (ou d\u00e9mons) sur Debian 13 (Apache, SSH, MariaDB, etc.). Commande R\u00f4le Exemple start D\u00e9marre un service. sudo systemctl start apache2 stop Arr\u00eate un service. sudo systemctl stop apache2 restart Arr\u00eate puis red\u00e9marre un service (n\u00e9cessaire apr\u00e8s modification d'une configuration majeure). sudo systemctl restart apache2 reload Recharge la configuration sans interrompre les connexions existantes (si le service le supporte). sudo systemctl reload apache2 status Affiche l'\u00e9tat du service (actif, inactif, en \u00e9chec) et les derni\u00e8res lignes de log. Indispensable pour le diagnostic ! systemctl status apache2 enable Active le d\u00e9marrage automatique du service au boot du syst\u00e8me. sudo systemctl enable apache2 disable D\u00e9sactive le d\u00e9marrage automatique du service au boot. sudo systemctl disable apache2","title":"3.2. Gestion des Services avec systemctl"},{"location":"1A/AP/AP-1A-Bases-Linux/#4-gestion-des-paquets-avec-apt","text":"Le syst\u00e8me de gestion de paquets APT (Advanced Package Tool) est la m\u00e9thode standard pour installer, mettre \u00e0 jour et supprimer des logiciels sur Debian. Commande R\u00f4le Exemple update Met \u00e0 jour la liste des paquets disponibles (l'index des d\u00e9p\u00f4ts). Toujours faire ceci en premier ! sudo apt update upgrade Installe les versions plus r\u00e9centes des paquets d\u00e9j\u00e0 install\u00e9s. sudo apt upgrade install Installe de nouveaux paquets. sudo apt install mariadb-server remove Supprime un paquet (laisse les fichiers de configuration). sudo apt remove apache2 purge Supprime un paquet et ses fichiers de configuration. (Plus propre !) sudo apt purge apache2","title":"4. Gestion des Paquets avec apt"},{"location":"1A/AP/AP-1A-Bases-Linux/#5-automatisation-scripts-shell-et-planification-cron","text":"L'administrateur SISR doit automatiser les t\u00e2ches r\u00e9p\u00e9titives (sauvegardes, mises \u00e0 jour, nettoyage).","title":"5. Automatisation : Scripts Shell et Planification (Cron)"},{"location":"1A/AP/AP-1A-Bases-Linux/#51-ecrire-un-script-shell","text":"Un script shell est un fichier texte contenant une suite de commandes Linux qui seront ex\u00e9cut\u00e9es s\u00e9quentiellement. L'ent\u00eate (Shebang) : La premi\u00e8re ligne doit indiquer au syst\u00e8me quel interpr\u00e9teur utiliser. Pour Bash (le shell par d\u00e9faut) : #!/bin/bash Exemple de script simple (sauvegarde.sh) : ```bash","title":"5.1. \u00c9crire un Script Shell"},{"location":"1A/AP/AP-1A-Bases-Linux/#binbash","text":"","title":"!/bin/bash"},{"location":"1A/AP/AP-1A-Bases-Linux/#definition-des-variables","text":"JOUR=$(date +%Y-%m-%d) SOURCE_DIR=\"/var/www/site\" DEST_DIR=\"/home/backup/web\"","title":"D\u00e9finition des variables"},{"location":"1A/AP/AP-1A-Bases-Linux/#affichage-dun-message","text":"echo \"--- D\u00e9but de la sauvegarde du $JOUR ---\"","title":"Affichage d'un message"},{"location":"1A/AP/AP-1A-Bases-Linux/#commande-de-compression-des-donnees","text":"tar -czf \"$DEST_DIR/web_backup_$JOUR.tar.gz\" \"$SOURCE_DIR\" echo \"Sauvegarde termin\u00e9e et stock\u00e9e dans $DEST_DIR\" ``` Rendre le script ex\u00e9cutable : chmod u+x sauvegarde.sh","title":"Commande de compression des donn\u00e9es"},{"location":"1A/AP/AP-1A-Bases-Linux/#52-planification-avec-cron","text":"cron est le service d'ordonnancement de t\u00e2ches (scheduler) qui permet d'ex\u00e9cuter des commandes ou des scripts \u00e0 intervalles r\u00e9guliers (minute, heure, jour, mois...). Les t\u00e2ches sont d\u00e9finies dans la crontab (cron table). \u00c9diter votre crontab : crontab -e Format d'une ligne crontab : m h dom mon dow commande Champ Valeurs Possibles Description m $0-59$ Minute h $0-23$ Heure dom $1-31$ Jour du Mois mon $1-12$ Mois dow $0-7$ Jour de la Semaine ($0$ ou $7$ = dimanche) Exemple Crontab : Ex\u00e9cuter le script de sauvegarde tous les jours \u00e0 2h30 du matin. bash 30 2 * * * /chemin/absolu/vers/sauvegarde.sh ( * signifie \"toutes les valeurs possibles\").","title":"5.2. Planification avec cron"},{"location":"1A/B1/Base%20du%20de%CC%81veloppement/Epreuve%20semestrielle/entrainement1-bibliothe%CC%80que/","text":"Entra\u00eenement : Application de gestion d'une biblioth\u00e8que Contexte : Une biblioth\u00e8que souhaite num\u00e9riser son syst\u00e8me de gestion pour g\u00e9rer les emprunts de livres. Vous devez \u00e9crire un programme simple en C# qui facilite cette gestion. Exercice 1. : D\u00e9claration de variables et types de donn\u00e9es (5 points) D\u00e9clarez les variables n\u00e9cessaires pour stocker : Le nombre total de livres disponibles. Le titre du livre emprunt\u00e9. Le nom de l'emprunteur. La dur\u00e9e de l'emprunt en jours. Assignez des valeurs initiales aux variables en supposant : 100 livres disponibles. Pas encore de titre emprunt\u00e9. Exercice 2. : Conditions et prise de d\u00e9cision (10 points) \u00c9crivez un programme qui : 1. Demande \u00e0 l'utilisateur le titre du livre qu'il souhaite emprunter. 2. V\u00e9rifie si le livre est disponible (en supposant qu'il y a 100 copies disponibles pour tous les livres). 3. Affiche : - Un message de confirmation si le livre est disponible. - Un message d\u2019erreur si aucun exemplaire n\u2019est disponible (livres restants = 0). Exemple : Quel livre souhaitez-vous emprunter ? \"Le Petit Prince\" Le livre \"Le Petit Prince\" est disponible. Votre emprunt est confirm\u00e9. Exercice 3. : Boucles et validation des entr\u00e9es (15 points) Modifiez le programme pr\u00e9c\u00e9dent pour permettre \u00e0 l'utilisateur de r\u00e9essayer si le titre saisi est vide. Utilisez une boucle do...while pour r\u00e9p\u00e9ter la demande tant que l'utilisateur n'entre pas un titre valide (non vide). Vous pouvez utiliser la m\u00e9thode string.IsNullOrWhiteSpace(uneChaine) qui retourne vrai si la variable pass\u00e9e en param\u00e8tre ne contient aucun caract\u00e8re ou que des espaces, et faux sinon. Exercice 4. : Utilisation des tableaux et des listes (20 points) D\u00e9clarez un tableau contenant les noms de 5 livres populaires disponibles dans la biblioth\u00e8que. Affichez ces titres \u00e0 l'aide d'une boucle foreach . Ajoutez une fonctionnalit\u00e9 permettant de suivre les titres emprunt\u00e9s en d\u00e9clarant une liste dynamique et en ajoutant le titre d'un livre saisi par l'utilisateur \u00e0 cette liste. Affichez la liste mise \u00e0 jour apr\u00e8s chaque emprunt. Exercice 5. : Cr\u00e9ation de fonctions (20 points) Impl\u00e9mentez une fonction CalculerDateRetour qui prend en param\u00e8tre : La dur\u00e9e de l'emprunt en jours. Et retourne la date de retour pr\u00e9vue en ajoutant cette dur\u00e9e \u00e0 la date actuelle. Appelez cette fonction pour afficher la date de retour pr\u00e9vue pour une dur\u00e9e d'emprunt de 10 jours. Exercice 6. : Mise en application compl\u00e8te (30 points) Cr\u00e9ez un programme complet en combinant les exercices pr\u00e9c\u00e9dents : 1. Demandez \u00e0 l'utilisateur de saisir : - Son nom. - Le titre du livre qu'il souhaite emprunter. - La dur\u00e9e de l'emprunt (en jours). Validez les donn\u00e9es saisies avec des boucles et conditions appropri\u00e9es. R\u00e9duisez le nombre total de livres disponibles apr\u00e8s un emprunt. Ajoutez le titre emprunt\u00e9 \u00e0 une liste de livres emprunt\u00e9s. Affichez un r\u00e9sum\u00e9 \u00e0 la fin : Nom de l'emprunteur. Titre du livre emprunt\u00e9. Dur\u00e9e de l'emprunt. Date de retour pr\u00e9vue. Nombre total de livres restants. Exemple de sortie : Nom de l'emprunteur : Marie Livre emprunt\u00e9 : Le Petit Prince Dur\u00e9e de l'emprunt : 14 jours Date de retour pr\u00e9vue : 2024-12-23 Livres restants : 99 Bar\u00e8me total. : 100 points Variables : 5 points Conditions : 10 points Boucles : 15 points Tableaux et listes : 20 points Fonctions : 20 points Mise en application compl\u00e8te : 30 points","title":"Entra\u00eenement : Application de gestion d'une biblioth\u00e8que"},{"location":"1A/B1/Base%20du%20de%CC%81veloppement/Epreuve%20semestrielle/entrainement1-bibliothe%CC%80que/#entrainement-application-de-gestion-dune-bibliotheque","text":"","title":"Entra\u00eenement : Application de gestion d'une biblioth\u00e8que"},{"location":"1A/B1/Base%20du%20de%CC%81veloppement/Epreuve%20semestrielle/entrainement1-bibliothe%CC%80que/#contexte","text":"Une biblioth\u00e8que souhaite num\u00e9riser son syst\u00e8me de gestion pour g\u00e9rer les emprunts de livres. Vous devez \u00e9crire un programme simple en C# qui facilite cette gestion.","title":"Contexte :"},{"location":"1A/B1/Base%20du%20de%CC%81veloppement/Epreuve%20semestrielle/entrainement1-bibliothe%CC%80que/#exercice-1-declaration-de-variables-et-types-de-donnees-5-points","text":"D\u00e9clarez les variables n\u00e9cessaires pour stocker : Le nombre total de livres disponibles. Le titre du livre emprunt\u00e9. Le nom de l'emprunteur. La dur\u00e9e de l'emprunt en jours. Assignez des valeurs initiales aux variables en supposant : 100 livres disponibles. Pas encore de titre emprunt\u00e9.","title":"Exercice 1. : D\u00e9claration de variables et types de donn\u00e9es (5 points)"},{"location":"1A/B1/Base%20du%20de%CC%81veloppement/Epreuve%20semestrielle/entrainement1-bibliothe%CC%80que/#exercice-2-conditions-et-prise-de-decision-10-points","text":"\u00c9crivez un programme qui : 1. Demande \u00e0 l'utilisateur le titre du livre qu'il souhaite emprunter. 2. V\u00e9rifie si le livre est disponible (en supposant qu'il y a 100 copies disponibles pour tous les livres). 3. Affiche : - Un message de confirmation si le livre est disponible. - Un message d\u2019erreur si aucun exemplaire n\u2019est disponible (livres restants = 0). Exemple : Quel livre souhaitez-vous emprunter ? \"Le Petit Prince\" Le livre \"Le Petit Prince\" est disponible. Votre emprunt est confirm\u00e9.","title":"Exercice 2. : Conditions et prise de d\u00e9cision (10 points)"},{"location":"1A/B1/Base%20du%20de%CC%81veloppement/Epreuve%20semestrielle/entrainement1-bibliothe%CC%80que/#exercice-3-boucles-et-validation-des-entrees-15-points","text":"Modifiez le programme pr\u00e9c\u00e9dent pour permettre \u00e0 l'utilisateur de r\u00e9essayer si le titre saisi est vide. Utilisez une boucle do...while pour r\u00e9p\u00e9ter la demande tant que l'utilisateur n'entre pas un titre valide (non vide). Vous pouvez utiliser la m\u00e9thode string.IsNullOrWhiteSpace(uneChaine) qui retourne vrai si la variable pass\u00e9e en param\u00e8tre ne contient aucun caract\u00e8re ou que des espaces, et faux sinon.","title":"Exercice 3. : Boucles et validation des entr\u00e9es (15 points)"},{"location":"1A/B1/Base%20du%20de%CC%81veloppement/Epreuve%20semestrielle/entrainement1-bibliothe%CC%80que/#exercice-4-utilisation-des-tableaux-et-des-listes-20-points","text":"D\u00e9clarez un tableau contenant les noms de 5 livres populaires disponibles dans la biblioth\u00e8que. Affichez ces titres \u00e0 l'aide d'une boucle foreach . Ajoutez une fonctionnalit\u00e9 permettant de suivre les titres emprunt\u00e9s en d\u00e9clarant une liste dynamique et en ajoutant le titre d'un livre saisi par l'utilisateur \u00e0 cette liste. Affichez la liste mise \u00e0 jour apr\u00e8s chaque emprunt.","title":"Exercice 4. : Utilisation des tableaux et des listes (20 points)"},{"location":"1A/B1/Base%20du%20de%CC%81veloppement/Epreuve%20semestrielle/entrainement1-bibliothe%CC%80que/#exercice-5-creation-de-fonctions-20-points","text":"Impl\u00e9mentez une fonction CalculerDateRetour qui prend en param\u00e8tre : La dur\u00e9e de l'emprunt en jours. Et retourne la date de retour pr\u00e9vue en ajoutant cette dur\u00e9e \u00e0 la date actuelle. Appelez cette fonction pour afficher la date de retour pr\u00e9vue pour une dur\u00e9e d'emprunt de 10 jours.","title":"Exercice 5. : Cr\u00e9ation de fonctions (20 points)"},{"location":"1A/B1/Base%20du%20de%CC%81veloppement/Epreuve%20semestrielle/entrainement1-bibliothe%CC%80que/#exercice-6-mise-en-application-complete-30-points","text":"Cr\u00e9ez un programme complet en combinant les exercices pr\u00e9c\u00e9dents : 1. Demandez \u00e0 l'utilisateur de saisir : - Son nom. - Le titre du livre qu'il souhaite emprunter. - La dur\u00e9e de l'emprunt (en jours). Validez les donn\u00e9es saisies avec des boucles et conditions appropri\u00e9es. R\u00e9duisez le nombre total de livres disponibles apr\u00e8s un emprunt. Ajoutez le titre emprunt\u00e9 \u00e0 une liste de livres emprunt\u00e9s. Affichez un r\u00e9sum\u00e9 \u00e0 la fin : Nom de l'emprunteur. Titre du livre emprunt\u00e9. Dur\u00e9e de l'emprunt. Date de retour pr\u00e9vue. Nombre total de livres restants. Exemple de sortie : Nom de l'emprunteur : Marie Livre emprunt\u00e9 : Le Petit Prince Dur\u00e9e de l'emprunt : 14 jours Date de retour pr\u00e9vue : 2024-12-23 Livres restants : 99","title":"Exercice 6. : Mise en application compl\u00e8te (30 points)"},{"location":"1A/B1/Base%20du%20de%CC%81veloppement/Epreuve%20semestrielle/entrainement1-bibliothe%CC%80que/#bareme-total-100-points","text":"Variables : 5 points Conditions : 10 points Boucles : 15 points Tableaux et listes : 20 points Fonctions : 20 points Mise en application compl\u00e8te : 30 points","title":"Bar\u00e8me total. : 100 points"},{"location":"1A/B1/Base%20du%20de%CC%81veloppement/Epreuve%20semestrielle/entrainement2-hopital/","text":"\u00c9valuation d'entra\u00eenement : Gestion des Rendez-Vous d'un H\u00f4pital Public Exercice 1 : D\u00e9claration de variables et types de donn\u00e9es (5 points) D\u00e9clarez les variables n\u00e9cessaires pour stocker : Le nombre total de m\u00e9decins disponibles. Le nombre total de salles de consultation disponibles. Le nom du patient. Le type de consultation souhait\u00e9e (g\u00e9n\u00e9raliste ou sp\u00e9cialiste) (o\u00f9 Vrai = sp\u00e9cialiste et Faux = g\u00e9n\u00e9raliste). La dur\u00e9e estim\u00e9e de la consultation en minutes. Assignez des valeurs initiales aux variables en supposant : 5 m\u00e9decins g\u00e9n\u00e9ralistes disponibles. 3 m\u00e9decins sp\u00e9cialistes disponibles. 8 salles de consultation disponibles. Le type de consultation par d\u00e9faut est g\u00e9n\u00e9raliste (ie Faux ). Exercice 2 : Conditions et prise de d\u00e9cision (10 points) \u00c9crivez un programme qui : 1. Demande \u00e0 l'utilisateur le type de consultation souhait\u00e9e : 1 pour g\u00e9n\u00e9raliste / 2 pour sp\u00e9cialiste. 2. V\u00e9rifie si un m\u00e9decin correspondant est disponible : - Si oui, passe le type de consultation \u00e0 true pour sp\u00e9cialiste ou false pour g\u00e9n\u00e9raliste. - R\u00e9serve un m\u00e9decin et une salle si les ressources sont disponibles, puis affiche un message de confirmation. - Si non, affiche un message d\u2019erreur indiquant qu\u2019aucune ressource n\u2019est disponible. Exemple : Quel type de consultation souhaitez-vous ? Saisissez 1 pour g\u00e9n\u00e9raliste ou 2 pour sp\u00e9cialiste : 2 Une consultation chez un sp\u00e9cialiste est disponible. Votre rendez-vous est confirm\u00e9. Exercice 3 : Boucles et validation des entr\u00e9es (15 points) Modifiez le programme pr\u00e9c\u00e9dent pour que l'utilisateur puisse r\u00e9essayer en cas de demande incorrecte. Utilisez une boucle do...while pour r\u00e9p\u00e9ter la demande tant que le type de consultation ou le nombre de m\u00e9decins disponibles est incorrect. Validez l'entr\u00e9e pour s'assurer que l'utilisateur saisit bien un entier correspondant au type de consultation. Exemple : Quel type de consultation souhaitez-vous ? abc Veuillez saisir un nombre valide. Quel type de consultation souhaitez-vous ? 3 Option non valide. Veuillez choisir 1 pour g\u00e9n\u00e9raliste ou 2 pour sp\u00e9cialiste. Exercice 4 : Utilisation des tableaux et des listes (20 points) D\u00e9clarez un tableau contenant les noms de 5 patients fictifs ayant d\u00e9j\u00e0 pris un rendez-vous. Affichez les noms des patients \u00e0 l'aide d'une boucle foreach . Ajoutez une fonctionnalit\u00e9 pour ajouter un nouveau patient \u00e0 une liste dynamique apr\u00e8s une r\u00e9servation valide. Affichez la liste mise \u00e0 jour apr\u00e8s chaque ajout. Exercice 5 : Cr\u00e9ation de fonctions (20 points) Impl\u00e9mentez une fonction CalculerTempsTotalOccup\u00e9 qui prend en param\u00e8tre : Le nombre de rendez-vous r\u00e9serv\u00e9s. La dur\u00e9e moyenne d'une consultation. Et retourne le temps total occup\u00e9 pour tous les rendez-vous. Appelez cette fonction apr\u00e8s chaque r\u00e9servation et affichez le temps total estim\u00e9 pour toutes les consultations. Exercice 6 : Mise en application compl\u00e8te (30 points) Cr\u00e9ez un programme complet en combinant les exercices pr\u00e9c\u00e9dents : 1. Demandez \u00e0 l'utilisateur de saisir : - Son nom. - Le type de consultation souhait\u00e9e (g\u00e9n\u00e9raliste/sp\u00e9cialiste). - La dur\u00e9e estim\u00e9e de la consultation. Validez les donn\u00e9es saisies avec des boucles et conditions appropri\u00e9es. Appelez la fonction CalculerTempsTotalOccup\u00e9 pour afficher la charge de travail estim\u00e9e de l'h\u00f4pital. Ajoutez le nom du patient \u00e0 une liste dynamique et r\u00e9duisez le nombre de m\u00e9decins et de salles disponibles. Affichez un r\u00e9sum\u00e9 \u00e0 la fin : Nom du patient. Type de consultation. Dur\u00e9e estim\u00e9e. M\u00e9decins restants. Salles restantes. Exemple de sortie : Nom du patient : Claire Type de consultation : Sp\u00e9cialiste Dur\u00e9e estim\u00e9e : 30 minutes M\u00e9decins restants : 2 Salles restantes : 7 Temps total occup\u00e9 pour toutes les consultations : 150 minutes. Bar\u00e8me total : 100 points Variables : 5 points Conditions : 10 points Boucles : 15 points Tableaux et listes : 20 points Fonctions : 20 points Mise en application compl\u00e8te : 30 points","title":"\u00c9valuation d'entra\u00eenement : Gestion des Rendez-Vous d'un H\u00f4pital Public"},{"location":"1A/B1/Base%20du%20de%CC%81veloppement/Epreuve%20semestrielle/entrainement2-hopital/#evaluation-dentrainement-gestion-des-rendez-vous-dun-hopital-public","text":"","title":"\u00c9valuation d'entra\u00eenement : Gestion des Rendez-Vous d'un H\u00f4pital Public"},{"location":"1A/B1/Base%20du%20de%CC%81veloppement/Epreuve%20semestrielle/entrainement2-hopital/#exercice-1-declaration-de-variables-et-types-de-donnees-5-points","text":"D\u00e9clarez les variables n\u00e9cessaires pour stocker : Le nombre total de m\u00e9decins disponibles. Le nombre total de salles de consultation disponibles. Le nom du patient. Le type de consultation souhait\u00e9e (g\u00e9n\u00e9raliste ou sp\u00e9cialiste) (o\u00f9 Vrai = sp\u00e9cialiste et Faux = g\u00e9n\u00e9raliste). La dur\u00e9e estim\u00e9e de la consultation en minutes. Assignez des valeurs initiales aux variables en supposant : 5 m\u00e9decins g\u00e9n\u00e9ralistes disponibles. 3 m\u00e9decins sp\u00e9cialistes disponibles. 8 salles de consultation disponibles. Le type de consultation par d\u00e9faut est g\u00e9n\u00e9raliste (ie Faux ).","title":"Exercice 1 : D\u00e9claration de variables et types de donn\u00e9es (5 points)"},{"location":"1A/B1/Base%20du%20de%CC%81veloppement/Epreuve%20semestrielle/entrainement2-hopital/#exercice-2-conditions-et-prise-de-decision-10-points","text":"\u00c9crivez un programme qui : 1. Demande \u00e0 l'utilisateur le type de consultation souhait\u00e9e : 1 pour g\u00e9n\u00e9raliste / 2 pour sp\u00e9cialiste. 2. V\u00e9rifie si un m\u00e9decin correspondant est disponible : - Si oui, passe le type de consultation \u00e0 true pour sp\u00e9cialiste ou false pour g\u00e9n\u00e9raliste. - R\u00e9serve un m\u00e9decin et une salle si les ressources sont disponibles, puis affiche un message de confirmation. - Si non, affiche un message d\u2019erreur indiquant qu\u2019aucune ressource n\u2019est disponible. Exemple : Quel type de consultation souhaitez-vous ? Saisissez 1 pour g\u00e9n\u00e9raliste ou 2 pour sp\u00e9cialiste : 2 Une consultation chez un sp\u00e9cialiste est disponible. Votre rendez-vous est confirm\u00e9.","title":"Exercice 2 : Conditions et prise de d\u00e9cision (10 points)"},{"location":"1A/B1/Base%20du%20de%CC%81veloppement/Epreuve%20semestrielle/entrainement2-hopital/#exercice-3-boucles-et-validation-des-entrees-15-points","text":"Modifiez le programme pr\u00e9c\u00e9dent pour que l'utilisateur puisse r\u00e9essayer en cas de demande incorrecte. Utilisez une boucle do...while pour r\u00e9p\u00e9ter la demande tant que le type de consultation ou le nombre de m\u00e9decins disponibles est incorrect. Validez l'entr\u00e9e pour s'assurer que l'utilisateur saisit bien un entier correspondant au type de consultation. Exemple : Quel type de consultation souhaitez-vous ? abc Veuillez saisir un nombre valide. Quel type de consultation souhaitez-vous ? 3 Option non valide. Veuillez choisir 1 pour g\u00e9n\u00e9raliste ou 2 pour sp\u00e9cialiste.","title":"Exercice 3 : Boucles et validation des entr\u00e9es (15 points)"},{"location":"1A/B1/Base%20du%20de%CC%81veloppement/Epreuve%20semestrielle/entrainement2-hopital/#exercice-4-utilisation-des-tableaux-et-des-listes-20-points","text":"D\u00e9clarez un tableau contenant les noms de 5 patients fictifs ayant d\u00e9j\u00e0 pris un rendez-vous. Affichez les noms des patients \u00e0 l'aide d'une boucle foreach . Ajoutez une fonctionnalit\u00e9 pour ajouter un nouveau patient \u00e0 une liste dynamique apr\u00e8s une r\u00e9servation valide. Affichez la liste mise \u00e0 jour apr\u00e8s chaque ajout.","title":"Exercice 4 : Utilisation des tableaux et des listes (20 points)"},{"location":"1A/B1/Base%20du%20de%CC%81veloppement/Epreuve%20semestrielle/entrainement2-hopital/#exercice-5-creation-de-fonctions-20-points","text":"Impl\u00e9mentez une fonction CalculerTempsTotalOccup\u00e9 qui prend en param\u00e8tre : Le nombre de rendez-vous r\u00e9serv\u00e9s. La dur\u00e9e moyenne d'une consultation. Et retourne le temps total occup\u00e9 pour tous les rendez-vous. Appelez cette fonction apr\u00e8s chaque r\u00e9servation et affichez le temps total estim\u00e9 pour toutes les consultations.","title":"Exercice 5 : Cr\u00e9ation de fonctions (20 points)"},{"location":"1A/B1/Base%20du%20de%CC%81veloppement/Epreuve%20semestrielle/entrainement2-hopital/#exercice-6-mise-en-application-complete-30-points","text":"Cr\u00e9ez un programme complet en combinant les exercices pr\u00e9c\u00e9dents : 1. Demandez \u00e0 l'utilisateur de saisir : - Son nom. - Le type de consultation souhait\u00e9e (g\u00e9n\u00e9raliste/sp\u00e9cialiste). - La dur\u00e9e estim\u00e9e de la consultation. Validez les donn\u00e9es saisies avec des boucles et conditions appropri\u00e9es. Appelez la fonction CalculerTempsTotalOccup\u00e9 pour afficher la charge de travail estim\u00e9e de l'h\u00f4pital. Ajoutez le nom du patient \u00e0 une liste dynamique et r\u00e9duisez le nombre de m\u00e9decins et de salles disponibles. Affichez un r\u00e9sum\u00e9 \u00e0 la fin : Nom du patient. Type de consultation. Dur\u00e9e estim\u00e9e. M\u00e9decins restants. Salles restantes. Exemple de sortie : Nom du patient : Claire Type de consultation : Sp\u00e9cialiste Dur\u00e9e estim\u00e9e : 30 minutes M\u00e9decins restants : 2 Salles restantes : 7 Temps total occup\u00e9 pour toutes les consultations : 150 minutes.","title":"Exercice 6 : Mise en application compl\u00e8te (30 points)"},{"location":"1A/B1/Base%20du%20de%CC%81veloppement/Epreuve%20semestrielle/entrainement2-hopital/#bareme-total-100-points","text":"Variables : 5 points Conditions : 10 points Boucles : 15 points Tableaux et listes : 20 points Fonctions : 20 points Mise en application compl\u00e8te : 30 points","title":"Bar\u00e8me total : 100 points"},{"location":"2A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/","text":"Tutoriel : D\u00e9ploiement d\u2019une application Symfony 7.3 sur Azure avec CI/CD Objectifs Cr\u00e9er une VM Debian 13 sur Azure (< 8\u20ac/mois) Installer et configurer PHP 8.4, MariaDB 12.1.2, NGINX Configurer un self-hosted runner GitHub Actions sur la VM Automatiser le d\u00e9ploiement de l\u2019application Symfony 1. Cr\u00e9ation de la machine virtuelle Debian 13 sur Azure Pr\u00e9requis Un compte Azure (gratuit pour les \u00e9tudiants via Azure for Students ) Une carte bancaire pour la v\u00e9rification (non d\u00e9bit\u00e9e si vous restez dans la limite gratuite) \u00c9tapes 1.1. Connexion au portail Azure Rendez-vous sur portal.azure.com et connectez-vous. 1.2. Cr\u00e9ation de la VM Cliquez sur \"Cr\u00e9er une ressource\" > \"Machine virtuelle\" . Remplissez les informations : Abonnement : S\u00e9lectionnez votre abonnement (gratuit si \u00e9tudiant). Groupe de ressources : Cr\u00e9ez-en un nouveau (ex: BTS-SIO-Symfony ). Nom de la machine virtuelle : symfony-vm . R\u00e9gion : Choisissez France Centre ou Europe Ouest . Options de disponibilit\u00e9 : Aucune infrastructure redondante requise . Image : S\u00e9lectionnez Debian 13 . Taille : Choisissez B2ats-v2 (1 vCPU, 1 Go RAM, ~7\u20ac/mois). Type d\u2019authentification : Cl\u00e9 publique SSH (recommand\u00e9) ou Mot de passe . Nom d\u2019utilisateur : azureuser . Ports d\u2019entr\u00e9e publics : Autorisez SSH (22) et HTTP (80) . Dans la sections \"Disques\": S\u00e9lectionner : SSD Standard Dans la section \"Mise en r\u00e9seau\": S\u00e9lectionner : Supprimer l\u2019adresse IP publique et la carte r\u00e9seau lors de la suppression de la machine virtuelle Cliquez sur \"V\u00e9rifier + cr\u00e9er\" , puis \"Cr\u00e9er\" . 1.3. Connexion \u00e0 la VM Une fois la VM cr\u00e9\u00e9e, notez son adresse IP publique . Connectez-vous en SSH : bash ssh ssh -i <nom de la cl\u00e9 SSH>.pem azureuser@<adresse-ip-publique> 2. Installation et configuration de l\u2019environnement 2.1. Mise \u00e0 jour du syst\u00e8me sudo apt update && sudo apt upgrade -y 2.2. Installation de PHP 8.4 sudo apt update sudo apt install -y lsb-release ca-certificates apt-transport-https curl gnupg curl -sSL https://packages.sury.org/php/README.txt | sudo bash -x echo \"deb https://packages.sury.org/php/ $(lsb_release -sc) main\" | sudo tee /etc/apt/sources.list.d/sury-php.list sudo apt update sudo apt install -y php8.4 php8.4-cli php8.4-fpm php8.4-mysql php8.4-xml php8.4-curl php8.4-mbstring php8.4-intl php8.4-zip V\u00e9rifiez la version : bash php -v 2.2.1 Installation de Composer curl -sS https://getcomposer.org/installer -o composer-setup.php HASH=`curl -sS https://composer.github.io/installer.sig` php -r \"if (hash_file('SHA384', 'composer-setup.php') === '$HASH') { echo 'Installer verified'; } else { echo 'Installer corrupt'; unlink('composer-setup.php'); } echo PHP_EOL;\" sudo php composer-setup.php --install-dir=/usr/local/bin --filename=composer 2.3. Installation de MariaDB 12.1.2 Ajoutez le d\u00e9p\u00f4t officiel de MariaDB : bash sudo curl -o /usr/share/keyrings/mariadb-keyring.gpg https://mariadb.org/mariadb_release_signing_key.asc echo \"deb [signed-by=/usr/share/keyrings/mariadb-keyring.gpg arch=amd64] https://mirror.netcologne.de/mariadb/repo/12.1/debian trixie main\" | sudo tee /etc/apt/sources.list.d/mariadb.list sudo apt update Installez MariaDB : bash sudo apt install -y mariadb-server mariadb-client S\u00e9curisez l\u2019installation : bash sudo mysql_secure_installation Suivez les instructions pour d\u00e9finir un mot de passe root et supprimer les utilisateurs anonymes. Cr\u00e9ez une base de donn\u00e9es pour Symfony : bash sudo mysql -u root -p sql CREATE DATABASE symfony_db; CREATE USER 'symfony_user'@'localhost' IDENTIFIED BY 'votre_mot_de_passe'; GRANT ALL PRIVILEGES ON symfony_db.* TO 'symfony_user'@'localhost'; FLUSH PRIVILEGES; EXIT; 2.4. Installation de NGINX Installez NGINX : bash sudo apt install -y nginx Configurez un h\u00f4te virtuel pour Symfony : bash sudo nano /etc/nginx/sites-available/symfony.conf Collez la configuration suivante (adaptez le server_name et le root ) : ```nginx server { server_name symfony.francecentral.cloudapp.azure.com; root /var/www/symfony/public; location / { # try to serve file directly, fallback to index.php try_files $uri /index.php$is_args$args; } # optionally disable falling back to PHP script for the asset directories; # nginx will return a 404 error when files are not found instead of passing the # request to Symfony (improves performance but Symfony's 404 page is not displayed) # location /bundles { # try_files $uri =404; # } location ~ ^/index\\.php(/|$) { fastcgi_pass unix:/var/run/php/php-fpm.sock; fastcgi_split_path_info ^(.+\\.php)(/.*)$; include fastcgi_params; # optionally set the value of the environment variables used in the application # fastcgi_param APP_ENV prod; # fastcgi_param APP_SECRET <app-secret-id>; # fastcgi_param DATABASE_URL \"mysql://db_user:db_pass@host:3306/db_name\"; # When you are using symlinks to link the document root to the # current version of your application, you should pass the real # application path instead of the path to the symlink to PHP # FPM. # Otherwise, PHP's OPcache may not properly detect changes to # your PHP files (see https://github.com/zendtech/ZendOptimizerPlus/issues/126 # for more information). # Caveat: When PHP-FPM is hosted on a different machine from nginx # $realpath_root may not resolve as you expect! In this case try using # $document_root instead. fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name; fastcgi_param DOCUMENT_ROOT $realpath_root; # Prevents URIs that include the front controller. This will 404: # http://domain.tld/index.php/some-path # Remove the internal directive to allow URIs like this } # return 404 for all other php files not matching the front controller # this prevents access to other php files you don't want to be accessible. location ~ \\.php$ { return 404; } error_log /var/log/nginx/symfony_error.log; access_log /var/log/nginx/symfony_access.log; } - Activez la configuration : bash sudo ln -s /etc/nginx/sites-available/symfony.conf /etc/nginx/sites-enabled/ sudo nginx -t sudo systemctl restart nginx ``` Param\u00e9trage des droits sur NGINX sudo usermod -a -G www-data azureuser sudo chown -R www-data:www-data /var/www/ sudo chmod 2775 /var/www/ && find /var/www/ -type d -exec sudo chmod 2775 {} \\; find /var/www/ -type f -exec sudo chmod 0664 {} \\; 2.5. Clonage de l\u2019application Symfony Installez Git : bash sudo apt install -y git Authentication Github via SSH Pourn comprendre les commandes donn\u00e9es, voir tuto: https://mgimond.github.io/Colby-summer-git-workshop-2021/authenticating-with-github.html#:~:text=Saving%20tokens%20in%20Linux,-To%20temporarily%20cache&text=The%20next%20time%20you%20are%20prompted%20for%20your%20GitHub%20user,this%20file%20is%20not%20encrypted. ssh-keygen -t ed25519 -C \"email de votre compte Github\" eval \"$(ssh-agent -s)\" ssh-add ~/.ssh/id_ed25519 #mettre la cl\u00e9 SSH dans profil Github cat ~/.ssh/id_ed25519.pub #test de connexion ssh -T git@github.com Clonez le d\u00e9p\u00f4t de l\u2019application (remplacez par l\u2019URL de votre d\u00e9p\u00f4t) : bash cd /var/www git clone git@github.com:votre compte Github/votre-depot-symfony.git symfony Installez les d\u00e9pendances avec Composer : bash composer install Configurez les variables d\u2019environnement ( .env ) : bash nano .env.local Mettez \u00e0 jour DATABASE_URL avec les informations de MariaDB et votre environnement en mode production afin de ne pas laisser d'info sensible apparaitre sur internet : APP_ENV=prod DATABASE_URL=\"mysql://symfony_user:votre_mot_de_passe@localhost:3306/symfony_db\" Application vos migrations pour \u00e9tablir le sch\u00e9ma de base de donn\u00e9es : bash php bin/console doctrine:migrations:migrate 3. Configuration du self-hosted runner GitHub Actions 3.1. Pr\u00e9paration de la VM Installez les d\u00e9pendances n\u00e9cessaires : bash sudo apt install -y curl jq 3.2. Cr\u00e9ation du runner Sur GitHub, allez dans votre d\u00e9p\u00f4t > Settings > Actions > Runners > New self-hosted runner . Suivez les instructions pour Linux (Debian). T\u00e9l\u00e9chargez et configurez le runner : bash mkdir actions-runner && cd actions-runner curl -o actions-runner-linux-x64-2.311.0.tar.gz -L https://github.com/actions/runner/releases/download/v2.311.0/actions-runner-linux-x64-2.311.0.tar.gz tar xzf ./actions-runner-linux-x64-2.311.0.tar.gz ./config.sh --url https://github.com/votre-utilisateur/votre-depot-symfony --token VOTRE_TOKEN_RUNNER Lancez le runner en arri\u00e8re-plan : bash sudo ./svc.sh install sudo ./svc.sh start 3.3. Configuration du workflow GitHub Actions Cr\u00e9ez un fichier .github/workflows/deploy.yml dans votre d\u00e9p\u00f4t : ```yaml name: D\u00e9ploiement Symfony on: push: branches: [ main ] jobs: deploy: runs-on: self-hosted steps: - uses: actions/checkout@v4 - name: Installer les d\u00e9pendances run: | cd /var/www/symfony composer install --no-dev --optimize-autoloader - name: Mettre \u00e0 jour la base de donn\u00e9es run: | cd /var/www/symfony php bin/console doctrine:migrations:migrate --no-interaction php bin/console cache:clear - name: Red\u00e9marrer NGINX et PHP-FPM run: | sudo systemctl restart nginx sudo systemctl restart php8.4-fpm ``` 4. V\u00e9rification et tests 4.1. Acc\u00e9der \u00e0 l\u2019application Ouvrez un navigateur et allez sur http://<adresse-ip-publique> . Vous devriez voir votre application Symfony. 4.2. Tester le pipeline CI/CD Faites un git push sur la branche main . Allez dans l\u2019onglet Actions de votre d\u00e9p\u00f4t GitHub pour suivre le d\u00e9ploiement. 6. Ressources suppl\u00e9mentaires GitHub Actions : Self-hosted runners","title":"B1 2A TP Mise en place d'un pipeline CICD"},{"location":"2A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#tutoriel-deploiement-dune-application-symfony-73-sur-azure-avec-cicd","text":"","title":"Tutoriel : D\u00e9ploiement d\u2019une application Symfony 7.3 sur Azure avec CI/CD"},{"location":"2A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#objectifs","text":"Cr\u00e9er une VM Debian 13 sur Azure (< 8\u20ac/mois) Installer et configurer PHP 8.4, MariaDB 12.1.2, NGINX Configurer un self-hosted runner GitHub Actions sur la VM Automatiser le d\u00e9ploiement de l\u2019application Symfony","title":"Objectifs"},{"location":"2A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#1-creation-de-la-machine-virtuelle-debian-13-sur-azure","text":"","title":"1. Cr\u00e9ation de la machine virtuelle Debian 13 sur Azure"},{"location":"2A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#prerequis","text":"Un compte Azure (gratuit pour les \u00e9tudiants via Azure for Students ) Une carte bancaire pour la v\u00e9rification (non d\u00e9bit\u00e9e si vous restez dans la limite gratuite)","title":"Pr\u00e9requis"},{"location":"2A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#etapes","text":"","title":"\u00c9tapes"},{"location":"2A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#11-connexion-au-portail-azure","text":"Rendez-vous sur portal.azure.com et connectez-vous.","title":"1.1. Connexion au portail Azure"},{"location":"2A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#12-creation-de-la-vm","text":"Cliquez sur \"Cr\u00e9er une ressource\" > \"Machine virtuelle\" . Remplissez les informations : Abonnement : S\u00e9lectionnez votre abonnement (gratuit si \u00e9tudiant). Groupe de ressources : Cr\u00e9ez-en un nouveau (ex: BTS-SIO-Symfony ). Nom de la machine virtuelle : symfony-vm . R\u00e9gion : Choisissez France Centre ou Europe Ouest . Options de disponibilit\u00e9 : Aucune infrastructure redondante requise . Image : S\u00e9lectionnez Debian 13 . Taille : Choisissez B2ats-v2 (1 vCPU, 1 Go RAM, ~7\u20ac/mois). Type d\u2019authentification : Cl\u00e9 publique SSH (recommand\u00e9) ou Mot de passe . Nom d\u2019utilisateur : azureuser . Ports d\u2019entr\u00e9e publics : Autorisez SSH (22) et HTTP (80) . Dans la sections \"Disques\": S\u00e9lectionner : SSD Standard Dans la section \"Mise en r\u00e9seau\": S\u00e9lectionner : Supprimer l\u2019adresse IP publique et la carte r\u00e9seau lors de la suppression de la machine virtuelle Cliquez sur \"V\u00e9rifier + cr\u00e9er\" , puis \"Cr\u00e9er\" .","title":"1.2. Cr\u00e9ation de la VM"},{"location":"2A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#13-connexion-a-la-vm","text":"Une fois la VM cr\u00e9\u00e9e, notez son adresse IP publique . Connectez-vous en SSH : bash ssh ssh -i <nom de la cl\u00e9 SSH>.pem azureuser@<adresse-ip-publique>","title":"1.3. Connexion \u00e0 la VM"},{"location":"2A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#2-installation-et-configuration-de-lenvironnement","text":"","title":"2. Installation et configuration de l\u2019environnement"},{"location":"2A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#21-mise-a-jour-du-systeme","text":"sudo apt update && sudo apt upgrade -y","title":"2.1. Mise \u00e0 jour du syst\u00e8me"},{"location":"2A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#22-installation-de-php-84","text":"sudo apt update sudo apt install -y lsb-release ca-certificates apt-transport-https curl gnupg curl -sSL https://packages.sury.org/php/README.txt | sudo bash -x echo \"deb https://packages.sury.org/php/ $(lsb_release -sc) main\" | sudo tee /etc/apt/sources.list.d/sury-php.list sudo apt update sudo apt install -y php8.4 php8.4-cli php8.4-fpm php8.4-mysql php8.4-xml php8.4-curl php8.4-mbstring php8.4-intl php8.4-zip V\u00e9rifiez la version : bash php -v","title":"2.2. Installation de PHP 8.4"},{"location":"2A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#221-installation-de-composer","text":"curl -sS https://getcomposer.org/installer -o composer-setup.php HASH=`curl -sS https://composer.github.io/installer.sig` php -r \"if (hash_file('SHA384', 'composer-setup.php') === '$HASH') { echo 'Installer verified'; } else { echo 'Installer corrupt'; unlink('composer-setup.php'); } echo PHP_EOL;\" sudo php composer-setup.php --install-dir=/usr/local/bin --filename=composer","title":"2.2.1 Installation de Composer"},{"location":"2A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#23-installation-de-mariadb-1212","text":"Ajoutez le d\u00e9p\u00f4t officiel de MariaDB : bash sudo curl -o /usr/share/keyrings/mariadb-keyring.gpg https://mariadb.org/mariadb_release_signing_key.asc echo \"deb [signed-by=/usr/share/keyrings/mariadb-keyring.gpg arch=amd64] https://mirror.netcologne.de/mariadb/repo/12.1/debian trixie main\" | sudo tee /etc/apt/sources.list.d/mariadb.list sudo apt update Installez MariaDB : bash sudo apt install -y mariadb-server mariadb-client S\u00e9curisez l\u2019installation : bash sudo mysql_secure_installation Suivez les instructions pour d\u00e9finir un mot de passe root et supprimer les utilisateurs anonymes. Cr\u00e9ez une base de donn\u00e9es pour Symfony : bash sudo mysql -u root -p sql CREATE DATABASE symfony_db; CREATE USER 'symfony_user'@'localhost' IDENTIFIED BY 'votre_mot_de_passe'; GRANT ALL PRIVILEGES ON symfony_db.* TO 'symfony_user'@'localhost'; FLUSH PRIVILEGES; EXIT;","title":"2.3. Installation de MariaDB 12.1.2"},{"location":"2A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#24-installation-de-nginx","text":"Installez NGINX : bash sudo apt install -y nginx Configurez un h\u00f4te virtuel pour Symfony : bash sudo nano /etc/nginx/sites-available/symfony.conf Collez la configuration suivante (adaptez le server_name et le root ) : ```nginx server { server_name symfony.francecentral.cloudapp.azure.com; root /var/www/symfony/public; location / { # try to serve file directly, fallback to index.php try_files $uri /index.php$is_args$args; } # optionally disable falling back to PHP script for the asset directories; # nginx will return a 404 error when files are not found instead of passing the # request to Symfony (improves performance but Symfony's 404 page is not displayed) # location /bundles { # try_files $uri =404; # } location ~ ^/index\\.php(/|$) { fastcgi_pass unix:/var/run/php/php-fpm.sock; fastcgi_split_path_info ^(.+\\.php)(/.*)$; include fastcgi_params; # optionally set the value of the environment variables used in the application # fastcgi_param APP_ENV prod; # fastcgi_param APP_SECRET <app-secret-id>; # fastcgi_param DATABASE_URL \"mysql://db_user:db_pass@host:3306/db_name\"; # When you are using symlinks to link the document root to the # current version of your application, you should pass the real # application path instead of the path to the symlink to PHP # FPM. # Otherwise, PHP's OPcache may not properly detect changes to # your PHP files (see https://github.com/zendtech/ZendOptimizerPlus/issues/126 # for more information). # Caveat: When PHP-FPM is hosted on a different machine from nginx # $realpath_root may not resolve as you expect! In this case try using # $document_root instead. fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name; fastcgi_param DOCUMENT_ROOT $realpath_root; # Prevents URIs that include the front controller. This will 404: # http://domain.tld/index.php/some-path # Remove the internal directive to allow URIs like this } # return 404 for all other php files not matching the front controller # this prevents access to other php files you don't want to be accessible. location ~ \\.php$ { return 404; } error_log /var/log/nginx/symfony_error.log; access_log /var/log/nginx/symfony_access.log; } - Activez la configuration : bash sudo ln -s /etc/nginx/sites-available/symfony.conf /etc/nginx/sites-enabled/ sudo nginx -t sudo systemctl restart nginx ``` Param\u00e9trage des droits sur NGINX sudo usermod -a -G www-data azureuser sudo chown -R www-data:www-data /var/www/ sudo chmod 2775 /var/www/ && find /var/www/ -type d -exec sudo chmod 2775 {} \\; find /var/www/ -type f -exec sudo chmod 0664 {} \\;","title":"2.4. Installation de NGINX"},{"location":"2A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#25-clonage-de-lapplication-symfony","text":"Installez Git : bash sudo apt install -y git Authentication Github via SSH Pourn comprendre les commandes donn\u00e9es, voir tuto: https://mgimond.github.io/Colby-summer-git-workshop-2021/authenticating-with-github.html#:~:text=Saving%20tokens%20in%20Linux,-To%20temporarily%20cache&text=The%20next%20time%20you%20are%20prompted%20for%20your%20GitHub%20user,this%20file%20is%20not%20encrypted. ssh-keygen -t ed25519 -C \"email de votre compte Github\" eval \"$(ssh-agent -s)\" ssh-add ~/.ssh/id_ed25519 #mettre la cl\u00e9 SSH dans profil Github cat ~/.ssh/id_ed25519.pub #test de connexion ssh -T git@github.com Clonez le d\u00e9p\u00f4t de l\u2019application (remplacez par l\u2019URL de votre d\u00e9p\u00f4t) : bash cd /var/www git clone git@github.com:votre compte Github/votre-depot-symfony.git symfony Installez les d\u00e9pendances avec Composer : bash composer install Configurez les variables d\u2019environnement ( .env ) : bash nano .env.local Mettez \u00e0 jour DATABASE_URL avec les informations de MariaDB et votre environnement en mode production afin de ne pas laisser d'info sensible apparaitre sur internet : APP_ENV=prod DATABASE_URL=\"mysql://symfony_user:votre_mot_de_passe@localhost:3306/symfony_db\" Application vos migrations pour \u00e9tablir le sch\u00e9ma de base de donn\u00e9es : bash php bin/console doctrine:migrations:migrate","title":"2.5. Clonage de l\u2019application Symfony"},{"location":"2A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#3-configuration-du-self-hosted-runner-github-actions","text":"","title":"3. Configuration du self-hosted runner GitHub Actions"},{"location":"2A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#31-preparation-de-la-vm","text":"Installez les d\u00e9pendances n\u00e9cessaires : bash sudo apt install -y curl jq","title":"3.1. Pr\u00e9paration de la VM"},{"location":"2A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#32-creation-du-runner","text":"Sur GitHub, allez dans votre d\u00e9p\u00f4t > Settings > Actions > Runners > New self-hosted runner . Suivez les instructions pour Linux (Debian). T\u00e9l\u00e9chargez et configurez le runner : bash mkdir actions-runner && cd actions-runner curl -o actions-runner-linux-x64-2.311.0.tar.gz -L https://github.com/actions/runner/releases/download/v2.311.0/actions-runner-linux-x64-2.311.0.tar.gz tar xzf ./actions-runner-linux-x64-2.311.0.tar.gz ./config.sh --url https://github.com/votre-utilisateur/votre-depot-symfony --token VOTRE_TOKEN_RUNNER Lancez le runner en arri\u00e8re-plan : bash sudo ./svc.sh install sudo ./svc.sh start","title":"3.2. Cr\u00e9ation du runner"},{"location":"2A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#33-configuration-du-workflow-github-actions","text":"Cr\u00e9ez un fichier .github/workflows/deploy.yml dans votre d\u00e9p\u00f4t : ```yaml name: D\u00e9ploiement Symfony on: push: branches: [ main ] jobs: deploy: runs-on: self-hosted steps: - uses: actions/checkout@v4 - name: Installer les d\u00e9pendances run: | cd /var/www/symfony composer install --no-dev --optimize-autoloader - name: Mettre \u00e0 jour la base de donn\u00e9es run: | cd /var/www/symfony php bin/console doctrine:migrations:migrate --no-interaction php bin/console cache:clear - name: Red\u00e9marrer NGINX et PHP-FPM run: | sudo systemctl restart nginx sudo systemctl restart php8.4-fpm ```","title":"3.3. Configuration du workflow GitHub Actions"},{"location":"2A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#4-verification-et-tests","text":"","title":"4. V\u00e9rification et tests"},{"location":"2A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#41-acceder-a-lapplication","text":"Ouvrez un navigateur et allez sur http://<adresse-ip-publique> . Vous devriez voir votre application Symfony.","title":"4.1. Acc\u00e9der \u00e0 l\u2019application"},{"location":"2A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#42-tester-le-pipeline-cicd","text":"Faites un git push sur la branche main . Allez dans l\u2019onglet Actions de votre d\u00e9p\u00f4t GitHub pour suivre le d\u00e9ploiement.","title":"4.2. Tester le pipeline CI/CD"},{"location":"2A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#6-ressources-supplementaires","text":"GitHub Actions : Self-hosted runners","title":"6. Ressources suppl\u00e9mentaires"}]}
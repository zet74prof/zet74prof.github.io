{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to MkDocs For full documentation visit mkdocs.org . Commands mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs -h - Print help message and exit. Project layout mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files.","title":"Welcome to MkDocs"},{"location":"#welcome-to-mkdocs","text":"For full documentation visit mkdocs.org .","title":"Welcome to MkDocs"},{"location":"#commands","text":"mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs -h - Print help message and exit.","title":"Commands"},{"location":"#project-layout","text":"mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files.","title":"Project layout"},{"location":"1A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/","text":"Tutoriel : D\u00e9ploiement d\u2019une application Symfony 7.3 sur Azure avec CI/CD Objectifs Cr\u00e9er une VM Debian 13 sur Azure (< 8\u20ac/mois) Installer et configurer PHP 8.4, MariaDB 12.1.2, NGINX Configurer un self-hosted runner GitHub Actions sur la VM Automatiser le d\u00e9ploiement de l\u2019application Symfony 1. Cr\u00e9ation de la machine virtuelle Debian 13 sur Azure Pr\u00e9requis Un compte Azure (gratuit pour les \u00e9tudiants via Azure for Students ) Une carte bancaire pour la v\u00e9rification (non d\u00e9bit\u00e9e si vous restez dans la limite gratuite) \u00c9tapes 1.1. Connexion au portail Azure Rendez-vous sur portal.azure.com et connectez-vous. 1.2. Cr\u00e9ation de la VM Cliquez sur \"Cr\u00e9er une ressource\" > \"Machine virtuelle\" . Remplissez les informations : Abonnement : S\u00e9lectionnez votre abonnement (gratuit si \u00e9tudiant). Groupe de ressources : Cr\u00e9ez-en un nouveau (ex: BTS-SIO-Symfony ). Nom de la machine virtuelle : symfony-vm . R\u00e9gion : Choisissez France Centre ou Europe Ouest . Options de disponibilit\u00e9 : Aucune infrastructure redondante requise . Image : S\u00e9lectionnez Debian 13 . Taille : Choisissez B2ats-v2 (1 vCPU, 1 Go RAM, ~7\u20ac/mois). Type d\u2019authentification : Cl\u00e9 publique SSH (recommand\u00e9) ou Mot de passe . Nom d\u2019utilisateur : azureuser . Ports d\u2019entr\u00e9e publics : Autorisez SSH (22) et HTTP (80) . Dans la sections \"Disques\": S\u00e9lectionner : SSD Standard Dans la section \"Mise en r\u00e9seau\": S\u00e9lectionner : Supprimer l\u2019adresse IP publique et la carte r\u00e9seau lors de la suppression de la machine virtuelle Cliquez sur \"V\u00e9rifier + cr\u00e9er\" , puis \"Cr\u00e9er\" . 1.3. Connexion \u00e0 la VM Une fois la VM cr\u00e9\u00e9e, notez son adresse IP publique . Connectez-vous en SSH : bash ssh ssh -i <nom de la cl\u00e9 SSH>.pem azureuser@<adresse-ip-publique> 2. Installation et configuration de l\u2019environnement 2.1. Mise \u00e0 jour du syst\u00e8me sudo apt update && sudo apt upgrade -y 2.2. Installation de PHP 8.4 sudo apt update sudo apt install -y lsb-release ca-certificates apt-transport-https curl gnupg curl -sSL https://packages.sury.org/php/README.txt | sudo bash -x echo \"deb https://packages.sury.org/php/ $(lsb_release -sc) main\" | sudo tee /etc/apt/sources.list.d/sury-php.list sudo apt update sudo apt install -y php8.4 php8.4-cli php8.4-fpm php8.4-mysql php8.4-xml php8.4-curl php8.4-mbstring php8.4-intl php8.4-zip V\u00e9rifiez la version : bash php -v 2.2.1 Installation de Composer curl -sS https://getcomposer.org/installer -o composer-setup.php HASH=`curl -sS https://composer.github.io/installer.sig` php -r \"if (hash_file('SHA384', 'composer-setup.php') === '$HASH') { echo 'Installer verified'; } else { echo 'Installer corrupt'; unlink('composer-setup.php'); } echo PHP_EOL;\" sudo php composer-setup.php --install-dir=/usr/local/bin --filename=composer 2.3. Installation de MariaDB 12.1.2 Ajoutez le d\u00e9p\u00f4t officiel de MariaDB : bash sudo curl -o /usr/share/keyrings/mariadb-keyring.gpg https://mariadb.org/mariadb_release_signing_key.asc echo \"deb [signed-by=/usr/share/keyrings/mariadb-keyring.gpg arch=amd64] https://mirror.netcologne.de/mariadb/repo/12.1/debian trixie main\" | sudo tee /etc/apt/sources.list.d/mariadb.list sudo apt update Installez MariaDB : bash sudo apt install -y mariadb-server mariadb-client S\u00e9curisez l\u2019installation : bash sudo mysql_secure_installation Suivez les instructions pour d\u00e9finir un mot de passe root et supprimer les utilisateurs anonymes. Cr\u00e9ez une base de donn\u00e9es pour Symfony : bash sudo mysql -u root -p sql CREATE DATABASE symfony_db; CREATE USER 'symfony_user'@'localhost' IDENTIFIED BY 'votre_mot_de_passe'; GRANT ALL PRIVILEGES ON symfony_db.* TO 'symfony_user'@'localhost'; FLUSH PRIVILEGES; EXIT; 2.4. Installation de NGINX Installez NGINX : bash sudo apt install -y nginx Configurez un h\u00f4te virtuel pour Symfony : bash sudo nano /etc/nginx/sites-available/symfony.conf Collez la configuration suivante (adaptez le server_name et le root ) : ```nginx server { server_name symfony.francecentral.cloudapp.azure.com; root /var/www/symfony/public; location / { # try to serve file directly, fallback to index.php try_files $uri /index.php$is_args$args; } # optionally disable falling back to PHP script for the asset directories; # nginx will return a 404 error when files are not found instead of passing the # request to Symfony (improves performance but Symfony's 404 page is not displayed) # location /bundles { # try_files $uri =404; # } location ~ ^/index\\.php(/|$) { fastcgi_pass unix:/var/run/php/php-fpm.sock; fastcgi_split_path_info ^(.+\\.php)(/.*)$; include fastcgi_params; # optionally set the value of the environment variables used in the application # fastcgi_param APP_ENV prod; # fastcgi_param APP_SECRET <app-secret-id>; # fastcgi_param DATABASE_URL \"mysql://db_user:db_pass@host:3306/db_name\"; # When you are using symlinks to link the document root to the # current version of your application, you should pass the real # application path instead of the path to the symlink to PHP # FPM. # Otherwise, PHP's OPcache may not properly detect changes to # your PHP files (see https://github.com/zendtech/ZendOptimizerPlus/issues/126 # for more information). # Caveat: When PHP-FPM is hosted on a different machine from nginx # $realpath_root may not resolve as you expect! In this case try using # $document_root instead. fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name; fastcgi_param DOCUMENT_ROOT $realpath_root; # Prevents URIs that include the front controller. This will 404: # http://domain.tld/index.php/some-path # Remove the internal directive to allow URIs like this } # return 404 for all other php files not matching the front controller # this prevents access to other php files you don't want to be accessible. location ~ \\.php$ { return 404; } error_log /var/log/nginx/symfony_error.log; access_log /var/log/nginx/symfony_access.log; } - Activez la configuration : bash sudo ln -s /etc/nginx/sites-available/symfony.conf /etc/nginx/sites-enabled/ sudo nginx -t sudo systemctl restart nginx ``` Param\u00e9trage des droits sur NGINX sudo usermod -a -G www-data azureuser sudo chown -R www-data:www-data /var/www/ sudo chmod 2775 /var/www/ && find /var/www/ -type d -exec sudo chmod 2775 {} \\; find /var/www/ -type f -exec sudo chmod 0664 {} \\; 2.5. Clonage de l\u2019application Symfony Installez Git : bash sudo apt install -y git Authentication Github via SSH Pourn comprendre les commandes donn\u00e9es, voir tuto: https://mgimond.github.io/Colby-summer-git-workshop-2021/authenticating-with-github.html#:~:text=Saving%20tokens%20in%20Linux,-To%20temporarily%20cache&text=The%20next%20time%20you%20are%20prompted%20for%20your%20GitHub%20user,this%20file%20is%20not%20encrypted. ssh-keygen -t ed25519 -C \"email de votre compte Github\" eval \"$(ssh-agent -s)\" ssh-add ~/.ssh/id_ed25519 #mettre la cl\u00e9 SSH dans profil Github cat ~/.ssh/id_ed25519.pub #test de connexion ssh -T git@github.com Clonez le d\u00e9p\u00f4t de l\u2019application (remplacez par l\u2019URL de votre d\u00e9p\u00f4t) : bash cd /var/www git clone git@github.com:votre compte Github/votre-depot-symfony.git symfony Installez les d\u00e9pendances avec Composer : bash composer install Configurez les variables d\u2019environnement ( .env ) : bash nano .env.local Mettez \u00e0 jour DATABASE_URL avec les informations de MariaDB et votre environnement en mode production afin de ne pas laisser d'info sensible apparaitre sur internet : APP_ENV=prod DATABASE_URL=\"mysql://symfony_user:votre_mot_de_passe@localhost:3306/symfony_db\" Application vos migrations pour \u00e9tablir le sch\u00e9ma de base de donn\u00e9es : bash php bin/console doctrine:migrations:migrate 3. Configuration du self-hosted runner GitHub Actions 3.1. Pr\u00e9paration de la VM Installez les d\u00e9pendances n\u00e9cessaires : bash sudo apt install -y curl jq 3.2. Cr\u00e9ation du runner Sur GitHub, allez dans votre d\u00e9p\u00f4t > Settings > Actions > Runners > New self-hosted runner . Suivez les instructions pour Linux (Debian). T\u00e9l\u00e9chargez et configurez le runner : bash mkdir actions-runner && cd actions-runner curl -o actions-runner-linux-x64-2.311.0.tar.gz -L https://github.com/actions/runner/releases/download/v2.311.0/actions-runner-linux-x64-2.311.0.tar.gz tar xzf ./actions-runner-linux-x64-2.311.0.tar.gz ./config.sh --url https://github.com/votre-utilisateur/votre-depot-symfony --token VOTRE_TOKEN_RUNNER Lancez le runner en arri\u00e8re-plan : bash sudo ./svc.sh install sudo ./svc.sh start 3.3. Configuration du workflow GitHub Actions Cr\u00e9ez un fichier .github/workflows/deploy.yml dans votre d\u00e9p\u00f4t : ```yaml name: D\u00e9ploiement Symfony on: push: branches: [ main ] jobs: deploy: runs-on: self-hosted steps: - uses: actions/checkout@v4 - name: Installer les d\u00e9pendances run: | cd /var/www/symfony composer install --no-dev --optimize-autoloader - name: Mettre \u00e0 jour la base de donn\u00e9es run: | cd /var/www/symfony php bin/console doctrine:migrations:migrate --no-interaction php bin/console cache:clear - name: Red\u00e9marrer NGINX et PHP-FPM run: | sudo systemctl restart nginx sudo systemctl restart php8.4-fpm ``` 4. V\u00e9rification et tests 4.1. Acc\u00e9der \u00e0 l\u2019application Ouvrez un navigateur et allez sur http://<adresse-ip-publique> . Vous devriez voir votre application Symfony. 4.2. Tester le pipeline CI/CD Faites un git push sur la branche main . Allez dans l\u2019onglet Actions de votre d\u00e9p\u00f4t GitHub pour suivre le d\u00e9ploiement. 6. Ressources suppl\u00e9mentaires GitHub Actions : Self-hosted runners","title":"B1 2A TP Mise en place d'un pipeline CICD"},{"location":"1A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#tutoriel-deploiement-dune-application-symfony-73-sur-azure-avec-cicd","text":"","title":"Tutoriel : D\u00e9ploiement d\u2019une application Symfony 7.3 sur Azure avec CI/CD"},{"location":"1A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#objectifs","text":"Cr\u00e9er une VM Debian 13 sur Azure (< 8\u20ac/mois) Installer et configurer PHP 8.4, MariaDB 12.1.2, NGINX Configurer un self-hosted runner GitHub Actions sur la VM Automatiser le d\u00e9ploiement de l\u2019application Symfony","title":"Objectifs"},{"location":"1A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#1-creation-de-la-machine-virtuelle-debian-13-sur-azure","text":"","title":"1. Cr\u00e9ation de la machine virtuelle Debian 13 sur Azure"},{"location":"1A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#prerequis","text":"Un compte Azure (gratuit pour les \u00e9tudiants via Azure for Students ) Une carte bancaire pour la v\u00e9rification (non d\u00e9bit\u00e9e si vous restez dans la limite gratuite)","title":"Pr\u00e9requis"},{"location":"1A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#etapes","text":"","title":"\u00c9tapes"},{"location":"1A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#11-connexion-au-portail-azure","text":"Rendez-vous sur portal.azure.com et connectez-vous.","title":"1.1. Connexion au portail Azure"},{"location":"1A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#12-creation-de-la-vm","text":"Cliquez sur \"Cr\u00e9er une ressource\" > \"Machine virtuelle\" . Remplissez les informations : Abonnement : S\u00e9lectionnez votre abonnement (gratuit si \u00e9tudiant). Groupe de ressources : Cr\u00e9ez-en un nouveau (ex: BTS-SIO-Symfony ). Nom de la machine virtuelle : symfony-vm . R\u00e9gion : Choisissez France Centre ou Europe Ouest . Options de disponibilit\u00e9 : Aucune infrastructure redondante requise . Image : S\u00e9lectionnez Debian 13 . Taille : Choisissez B2ats-v2 (1 vCPU, 1 Go RAM, ~7\u20ac/mois). Type d\u2019authentification : Cl\u00e9 publique SSH (recommand\u00e9) ou Mot de passe . Nom d\u2019utilisateur : azureuser . Ports d\u2019entr\u00e9e publics : Autorisez SSH (22) et HTTP (80) . Dans la sections \"Disques\": S\u00e9lectionner : SSD Standard Dans la section \"Mise en r\u00e9seau\": S\u00e9lectionner : Supprimer l\u2019adresse IP publique et la carte r\u00e9seau lors de la suppression de la machine virtuelle Cliquez sur \"V\u00e9rifier + cr\u00e9er\" , puis \"Cr\u00e9er\" .","title":"1.2. Cr\u00e9ation de la VM"},{"location":"1A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#13-connexion-a-la-vm","text":"Une fois la VM cr\u00e9\u00e9e, notez son adresse IP publique . Connectez-vous en SSH : bash ssh ssh -i <nom de la cl\u00e9 SSH>.pem azureuser@<adresse-ip-publique>","title":"1.3. Connexion \u00e0 la VM"},{"location":"1A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#2-installation-et-configuration-de-lenvironnement","text":"","title":"2. Installation et configuration de l\u2019environnement"},{"location":"1A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#21-mise-a-jour-du-systeme","text":"sudo apt update && sudo apt upgrade -y","title":"2.1. Mise \u00e0 jour du syst\u00e8me"},{"location":"1A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#22-installation-de-php-84","text":"sudo apt update sudo apt install -y lsb-release ca-certificates apt-transport-https curl gnupg curl -sSL https://packages.sury.org/php/README.txt | sudo bash -x echo \"deb https://packages.sury.org/php/ $(lsb_release -sc) main\" | sudo tee /etc/apt/sources.list.d/sury-php.list sudo apt update sudo apt install -y php8.4 php8.4-cli php8.4-fpm php8.4-mysql php8.4-xml php8.4-curl php8.4-mbstring php8.4-intl php8.4-zip V\u00e9rifiez la version : bash php -v","title":"2.2. Installation de PHP 8.4"},{"location":"1A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#221-installation-de-composer","text":"curl -sS https://getcomposer.org/installer -o composer-setup.php HASH=`curl -sS https://composer.github.io/installer.sig` php -r \"if (hash_file('SHA384', 'composer-setup.php') === '$HASH') { echo 'Installer verified'; } else { echo 'Installer corrupt'; unlink('composer-setup.php'); } echo PHP_EOL;\" sudo php composer-setup.php --install-dir=/usr/local/bin --filename=composer","title":"2.2.1 Installation de Composer"},{"location":"1A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#23-installation-de-mariadb-1212","text":"Ajoutez le d\u00e9p\u00f4t officiel de MariaDB : bash sudo curl -o /usr/share/keyrings/mariadb-keyring.gpg https://mariadb.org/mariadb_release_signing_key.asc echo \"deb [signed-by=/usr/share/keyrings/mariadb-keyring.gpg arch=amd64] https://mirror.netcologne.de/mariadb/repo/12.1/debian trixie main\" | sudo tee /etc/apt/sources.list.d/mariadb.list sudo apt update Installez MariaDB : bash sudo apt install -y mariadb-server mariadb-client S\u00e9curisez l\u2019installation : bash sudo mysql_secure_installation Suivez les instructions pour d\u00e9finir un mot de passe root et supprimer les utilisateurs anonymes. Cr\u00e9ez une base de donn\u00e9es pour Symfony : bash sudo mysql -u root -p sql CREATE DATABASE symfony_db; CREATE USER 'symfony_user'@'localhost' IDENTIFIED BY 'votre_mot_de_passe'; GRANT ALL PRIVILEGES ON symfony_db.* TO 'symfony_user'@'localhost'; FLUSH PRIVILEGES; EXIT;","title":"2.3. Installation de MariaDB 12.1.2"},{"location":"1A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#24-installation-de-nginx","text":"Installez NGINX : bash sudo apt install -y nginx Configurez un h\u00f4te virtuel pour Symfony : bash sudo nano /etc/nginx/sites-available/symfony.conf Collez la configuration suivante (adaptez le server_name et le root ) : ```nginx server { server_name symfony.francecentral.cloudapp.azure.com; root /var/www/symfony/public; location / { # try to serve file directly, fallback to index.php try_files $uri /index.php$is_args$args; } # optionally disable falling back to PHP script for the asset directories; # nginx will return a 404 error when files are not found instead of passing the # request to Symfony (improves performance but Symfony's 404 page is not displayed) # location /bundles { # try_files $uri =404; # } location ~ ^/index\\.php(/|$) { fastcgi_pass unix:/var/run/php/php-fpm.sock; fastcgi_split_path_info ^(.+\\.php)(/.*)$; include fastcgi_params; # optionally set the value of the environment variables used in the application # fastcgi_param APP_ENV prod; # fastcgi_param APP_SECRET <app-secret-id>; # fastcgi_param DATABASE_URL \"mysql://db_user:db_pass@host:3306/db_name\"; # When you are using symlinks to link the document root to the # current version of your application, you should pass the real # application path instead of the path to the symlink to PHP # FPM. # Otherwise, PHP's OPcache may not properly detect changes to # your PHP files (see https://github.com/zendtech/ZendOptimizerPlus/issues/126 # for more information). # Caveat: When PHP-FPM is hosted on a different machine from nginx # $realpath_root may not resolve as you expect! In this case try using # $document_root instead. fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name; fastcgi_param DOCUMENT_ROOT $realpath_root; # Prevents URIs that include the front controller. This will 404: # http://domain.tld/index.php/some-path # Remove the internal directive to allow URIs like this } # return 404 for all other php files not matching the front controller # this prevents access to other php files you don't want to be accessible. location ~ \\.php$ { return 404; } error_log /var/log/nginx/symfony_error.log; access_log /var/log/nginx/symfony_access.log; } - Activez la configuration : bash sudo ln -s /etc/nginx/sites-available/symfony.conf /etc/nginx/sites-enabled/ sudo nginx -t sudo systemctl restart nginx ``` Param\u00e9trage des droits sur NGINX sudo usermod -a -G www-data azureuser sudo chown -R www-data:www-data /var/www/ sudo chmod 2775 /var/www/ && find /var/www/ -type d -exec sudo chmod 2775 {} \\; find /var/www/ -type f -exec sudo chmod 0664 {} \\;","title":"2.4. Installation de NGINX"},{"location":"1A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#25-clonage-de-lapplication-symfony","text":"Installez Git : bash sudo apt install -y git Authentication Github via SSH Pourn comprendre les commandes donn\u00e9es, voir tuto: https://mgimond.github.io/Colby-summer-git-workshop-2021/authenticating-with-github.html#:~:text=Saving%20tokens%20in%20Linux,-To%20temporarily%20cache&text=The%20next%20time%20you%20are%20prompted%20for%20your%20GitHub%20user,this%20file%20is%20not%20encrypted. ssh-keygen -t ed25519 -C \"email de votre compte Github\" eval \"$(ssh-agent -s)\" ssh-add ~/.ssh/id_ed25519 #mettre la cl\u00e9 SSH dans profil Github cat ~/.ssh/id_ed25519.pub #test de connexion ssh -T git@github.com Clonez le d\u00e9p\u00f4t de l\u2019application (remplacez par l\u2019URL de votre d\u00e9p\u00f4t) : bash cd /var/www git clone git@github.com:votre compte Github/votre-depot-symfony.git symfony Installez les d\u00e9pendances avec Composer : bash composer install Configurez les variables d\u2019environnement ( .env ) : bash nano .env.local Mettez \u00e0 jour DATABASE_URL avec les informations de MariaDB et votre environnement en mode production afin de ne pas laisser d'info sensible apparaitre sur internet : APP_ENV=prod DATABASE_URL=\"mysql://symfony_user:votre_mot_de_passe@localhost:3306/symfony_db\" Application vos migrations pour \u00e9tablir le sch\u00e9ma de base de donn\u00e9es : bash php bin/console doctrine:migrations:migrate","title":"2.5. Clonage de l\u2019application Symfony"},{"location":"1A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#3-configuration-du-self-hosted-runner-github-actions","text":"","title":"3. Configuration du self-hosted runner GitHub Actions"},{"location":"1A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#31-preparation-de-la-vm","text":"Installez les d\u00e9pendances n\u00e9cessaires : bash sudo apt install -y curl jq","title":"3.1. Pr\u00e9paration de la VM"},{"location":"1A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#32-creation-du-runner","text":"Sur GitHub, allez dans votre d\u00e9p\u00f4t > Settings > Actions > Runners > New self-hosted runner . Suivez les instructions pour Linux (Debian). T\u00e9l\u00e9chargez et configurez le runner : bash mkdir actions-runner && cd actions-runner curl -o actions-runner-linux-x64-2.311.0.tar.gz -L https://github.com/actions/runner/releases/download/v2.311.0/actions-runner-linux-x64-2.311.0.tar.gz tar xzf ./actions-runner-linux-x64-2.311.0.tar.gz ./config.sh --url https://github.com/votre-utilisateur/votre-depot-symfony --token VOTRE_TOKEN_RUNNER Lancez le runner en arri\u00e8re-plan : bash sudo ./svc.sh install sudo ./svc.sh start","title":"3.2. Cr\u00e9ation du runner"},{"location":"1A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#33-configuration-du-workflow-github-actions","text":"Cr\u00e9ez un fichier .github/workflows/deploy.yml dans votre d\u00e9p\u00f4t : ```yaml name: D\u00e9ploiement Symfony on: push: branches: [ main ] jobs: deploy: runs-on: self-hosted steps: - uses: actions/checkout@v4 - name: Installer les d\u00e9pendances run: | cd /var/www/symfony composer install --no-dev --optimize-autoloader - name: Mettre \u00e0 jour la base de donn\u00e9es run: | cd /var/www/symfony php bin/console doctrine:migrations:migrate --no-interaction php bin/console cache:clear - name: Red\u00e9marrer NGINX et PHP-FPM run: | sudo systemctl restart nginx sudo systemctl restart php8.4-fpm ```","title":"3.3. Configuration du workflow GitHub Actions"},{"location":"1A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#4-verification-et-tests","text":"","title":"4. V\u00e9rification et tests"},{"location":"1A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#41-acceder-a-lapplication","text":"Ouvrez un navigateur et allez sur http://<adresse-ip-publique> . Vous devriez voir votre application Symfony.","title":"4.1. Acc\u00e9der \u00e0 l\u2019application"},{"location":"1A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#42-tester-le-pipeline-cicd","text":"Faites un git push sur la branche main . Allez dans l\u2019onglet Actions de votre d\u00e9p\u00f4t GitHub pour suivre le d\u00e9ploiement.","title":"4.2. Tester le pipeline CI/CD"},{"location":"1A/B1/B1-2A-TP-Mise%20en%20place%20d%27un%20pipeline%20CICD/#6-ressources-supplementaires","text":"GitHub Actions : Self-hosted runners","title":"6. Ressources suppl\u00e9mentaires"}]}